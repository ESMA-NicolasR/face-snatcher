[gd_scene format=3 uid="uid://tnrj556cv806"]

[ext_resource type="Texture2D" uid="uid://dt1pwy1r8u4bx" path="res://Nicolas/clodo.png" id="1_forw5"]
[ext_resource type="Script" uid="uid://bbdw60f0d54jf" path="res://Alois/Scripts/mask_manager.gd" id="2_eellc"]
[ext_resource type="Script" path="res://Alois/Scripts/PNJ_Spawn_and_path.gd" id="2_s2v6g"]
[ext_resource type="Script" uid="uid://di85fq50j2eop" path="res://Alois/Scripts/camera_shake.gd" id="3_dcd8u"]
[ext_resource type="Script" uid="uid://67ki1jnx5lw5" path="res://Alois/Scripts/Decorations_Manager.gd" id="3_eellc"]
[ext_resource type="Texture2D" uid="uid://dn4ob6id3dawi" path="res://Sprites/NPC/Parts/AllFaces/T_Face_Everyman.png" id="3_i0eqp"]
[ext_resource type="PackedScene" uid="uid://dajoisdrbqbou" path="res://Alois/Mesh/Decorations/Level 1/sm_tree1.tscn" id="4_i0eqp"]
[ext_resource type="PackedScene" uid="uid://duc73xitbvn5r" path="res://Alois/Mesh/Decorations/Level 1/sm_tree2.tscn" id="5_dcd8u"]
[ext_resource type="PackedScene" uid="uid://6kjpu35jhofq" path="res://Alois/Mesh/Decorations/Level 1/sm_tree3.tscn" id="6_4bnli"]
[ext_resource type="PackedScene" uid="uid://7gmhlma35ycp" path="res://Alois/Mesh/Decorations/Level 1/sm_fence.tscn" id="7_rrfvl"]
[ext_resource type="PackedScene" uid="uid://cede8dj1osq7" path="res://Alois/Mesh/Decorations/Level 1/sm_streetlight.tscn" id="8_wg8fj"]
[ext_resource type="PackedScene" uid="uid://b5xkaemsjqoka" path="res://Alois/Mesh/Decorations/Level 1/sm_bench.tscn" id="9_jqlch"]
[ext_resource type="PackedScene" uid="uid://cb4pb4lwmvf24" path="res://Nicolas/NPC_Generator.tscn" id="10_om7mb"]
[ext_resource type="Script" uid="uid://dvdsvbr7rfl4p" path="res://Alois/Scripts/game_speed_manager.gd" id="11_a27uk"]
[ext_resource type="Script" uid="uid://b61vs6qflbt3x" path="res://Alois/Scripts/Interface.gd" id="12_rkggn"]
[ext_resource type="PackedScene" uid="uid://diaftxgkqrmto" path="res://Mathys/SM_Ground.fbx" id="14_eellc"]
[ext_resource type="PackedScene" uid="uid://dhkcbon4b1gtv" path="res://FXs/FX_BloodSplatter.tscn" id="17_4bnli"]

[sub_resource type="Curve3D" id="Curve3D_s2v6g"]
bake_interval = 1.0
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, -2.5918221, 0, 0, 0, 0, 0, 0, 0, 0, -1.911953, 4.871397, 0, 0, 0, 0, 0, 0, 0, -1.3871859, 9.978567, 0, 0, 0, 0, 0, 0, 0, -0.8473699, 17.6422, 0, 0, 0, 0, 0, 0, 0, -0.4249754, 26.700605, 0, 0, 0, 0, 0, 0, 0, 0, 39),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0)
}
point_count = 6

[sub_resource type="Curve3D" id="Curve3D_eellc"]
bake_interval = 1.0
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, -2.5612626, 0, 0, 0, 0, 0, 0, 0, 0, -1.851908, 5.3880787, 0, 0, 0, 0, 0, 0, 0, -1.2919619, 11.343309, 0, 0, 0, 0, 0, 0, 0, -0.85321105, 18.102036, 0, 0, 0, 0, 0, 0, 0, -0.34294325, 27.156826, 0, 0, 0, 0, 0, 0, 0, 0, 39),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0)
}
point_count = 6

[sub_resource type="Curve3D" id="Curve3D_1ptqf"]
bake_interval = 1.0
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 39),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hl1dy"]
albedo_texture = ExtResource("1_forw5")

[sub_resource type="CapsuleMesh" id="CapsuleMesh_s2v6g"]

[sub_resource type="BoxShape3D" id="BoxShape3D_60xjm"]

[node name="Node3D" type="Node3D" unique_id=939731608]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=564959843]
transform = Transform3D(0.08766735, 0.6854392, 0.72283304, 0.8376052, -0.44348922, 0.31895924, 0.53919584, 0.57748634, -0.6130069, 0, 0, -36.78343)
light_color = Color(0.71811104, 0.77309656, 0.8151441, 1)
shadow_enabled = true

[node name="SM_Ground" parent="." unique_id=326826706 instance=ExtResource("14_eellc")]
transform = Transform3D(1.3113416e-07, 0, -1, 0, 1, 0, 1, 0, 1.3113416e-07, 0, 0, 0.017298698)

[node name="Paths" type="Node3D" parent="SM_Ground" unique_id=1995780754]
transform = Transform3D(1.3113416e-07, 0, 1, 0, 1, 0, -1, 0, 1.3113416e-07, -0.017298698, 0, -2.2684503e-09)

[node name="PNJ Left Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=1600655904]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.75, 0.35, -36.783)
curve = SubResource("Curve3D_s2v6g")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="PNJ Right Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=487030063]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.75, 0.35, -36.783)
curve = SubResource("Curve3D_eellc")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Decoration LEFT left Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=508389562]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.75, 0, -36.783)
curve = SubResource("Curve3D_1ptqf")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Decoration LEFT center Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=253330147]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, -36.783)
curve = SubResource("Curve3D_1ptqf")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Decoration LEFT right Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=155671147]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.5, 0, -36.783)
curve = SubResource("Curve3D_1ptqf")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Decoration RIGHT right Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=644579637]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.75, 0, -36.783)
curve = SubResource("Curve3D_1ptqf")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Decoration RIGHT center Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=1670214885]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, -36.783)
curve = SubResource("Curve3D_1ptqf")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Decoration RIGHT left Path3D" type="Path3D" parent="SM_Ground/Paths" unique_id=1633807055]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.5, 0, -36.783)
curve = SubResource("Curve3D_1ptqf")
debug_custom_color = Color(0.9522076, 0.08088475, 7.70092e-07, 1)

[node name="Player_Mesh" type="MeshInstance3D" parent="." unique_id=912936030]
transform = Transform3D(0.462, 0, 0, 0, 0.6, 0, 0, 0, 0.462, 0, 0.65, -1.3334274)
material_override = SubResource("StandardMaterial3D_hl1dy")
mesh = SubResource("CapsuleMesh_s2v6g")

[node name="Player Camera3D" type="Camera3D" parent="Player_Mesh" unique_id=1811056502 node_paths=PackedStringArray("ui_interface")]
transform = Transform3D(10, 0, 0, 0, 8.191521, 5.7357645, 0, -5.7357645, 8.191521, 0, 2, 3)
current = true
fov = 70.0
far = 1000.0
script = ExtResource("3_dcd8u")
seuil_stress = 50.0
force_min = 0.005
force_max = 0.2
ui_interface = NodePath("../../UI")

[node name="StaticBody3D" type="StaticBody3D" parent="Player_Mesh" unique_id=501597762 groups=["Player"]]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player_Mesh/StaticBody3D" unique_id=1908706289]
transform = Transform3D(0.70710677, 0, 0.70710677, 0, 1, 0, -0.70710677, 0, 0.70710677, 0, 0, 0)
shape = SubResource("BoxShape3D_60xjm")

[node name="Visuals" type="Node3D" parent="Player_Mesh" unique_id=1074214666]

[node name="Mask_Manager" type="Node3D" parent="Player_Mesh/Visuals" unique_id=1005035685]
script = ExtResource("2_eellc")

[node name="PlayerFace" type="Sprite3D" parent="Player_Mesh/Visuals" unique_id=2113139002]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.75, 1.25, -0.25)
texture = ExtResource("3_i0eqp")

[node name="EyeBrows" type="Sprite3D" parent="Player_Mesh/Visuals/PlayerFace" unique_id=1697586647]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.006)

[node name="Eyes" type="Sprite3D" parent="Player_Mesh/Visuals/PlayerFace" unique_id=117561765]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.004)

[node name="Nose" type="Sprite3D" parent="Player_Mesh/Visuals/PlayerFace" unique_id=1273195567]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.002)

[node name="Lips" type="Sprite3D" parent="Player_Mesh/Visuals/PlayerFace" unique_id=1824721497]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.002)

[node name="Timers" type="Node" parent="." unique_id=1303597835]

[node name="PNJ Spawn Timer" type="Timer" parent="Timers" unique_id=362300206]
wait_time = 5.0
autostart = true

[node name="Decoration Leftleft Timer1" type="Timer" parent="Timers" unique_id=479268536]
wait_time = 5.0
one_shot = true
autostart = true

[node name="Decoration Leftcenter Timer2" type="Timer" parent="Timers" unique_id=296177828]
wait_time = 3.0
one_shot = true
autostart = true

[node name="Decoration Leftright Timer3" type="Timer" parent="Timers" unique_id=1304791291]
wait_time = 7.5
one_shot = true
autostart = true

[node name="Decoration Rightright Timer4" type="Timer" parent="Timers" unique_id=1618409885]
wait_time = 5.0
one_shot = true
autostart = true

[node name="Decoration Rightcenter Timer5" type="Timer" parent="Timers" unique_id=316492386]
wait_time = 3.0
one_shot = true
autostart = true

[node name="Decoration Rightleft Timer6" type="Timer" parent="Timers" unique_id=523578028]
wait_time = 7.5
one_shot = true
autostart = true

[node name="Scripts" type="Node" parent="." unique_id=1306583703]

[node name="PNJ_Manager" type="Node" parent="Scripts" unique_id=524255491 node_paths=PackedStringArray("path_Left", "path_Right")]
script = ExtResource("2_s2v6g")
vitesse_min = 1.05
debut_ralentissement = 0.5
fin_ralentissement = 0.9
debut_acceleration = 0.9
fin_acceleration = 1.0
path_Left = NodePath("../../SM_Ground/Paths/PNJ Left Path3D")
path_Right = NodePath("../../SM_Ground/Paths/PNJ Right Path3D")

[node name="Decoration_Manager" type="Node" parent="Scripts" unique_id=2044267013 node_paths=PackedStringArray("path_Left_left", "timer_LL", "path_Left_center", "timer_LC", "path_Left_right", "timer_LR", "path_Right_right", "timer_RR", "path_Right_center", "timer_RC", "path_Right_left", "timer_RL")]
script = ExtResource("3_eellc")
meshes_far = Array[PackedScene]([ExtResource("4_i0eqp"), ExtResource("5_dcd8u"), ExtResource("6_4bnli")])
meshes_med = Array[PackedScene]([ExtResource("7_rrfvl")])
meshes_close = Array[PackedScene]([ExtResource("8_wg8fj"), ExtResource("9_jqlch")])
vitesse_max_far = 3.0
vitesse_min_far = 1.0
vitesse_max_med = 3.5
vitesse_min_med = 3.0
vitesse_max_close = 4.5
vitesse_min_close = 3.5
debut_ralentissement_far = 0.6
debut_ralentissement_med = 0.7
fin_ralentissement_med = 0.7
debut_acceleration_med = 0.7
fin_acceleration_med = 0.7
rot_y_far_L = Vector2(0, 180)
rot_y_med_L = Vector2(0, 0)
rot_y_far_R = Vector2(0, 180)
rot_y_med_R = Vector2(0, 0)
rot_y_close_R = Vector2(180, 180)
range_med_left_min = 0.638
range_med_left_max = 0.638
range_med_right_min = 0.638
range_med_right_max = 0.638
range_close_left_min = 4.0
range_close_left_max = 8.0
range_close_right_min = 4.0
range_close_right_max = 8.0
path_Left_left = NodePath("../../SM_Ground/Paths/Decoration LEFT left Path3D")
timer_LL = NodePath("../../Timers/Decoration Leftleft Timer1")
path_Left_center = NodePath("../../SM_Ground/Paths/Decoration LEFT center Path3D")
timer_LC = NodePath("../../Timers/Decoration Leftcenter Timer2")
path_Left_right = NodePath("../../SM_Ground/Paths/Decoration LEFT right Path3D")
timer_LR = NodePath("../../Timers/Decoration Leftright Timer3")
path_Right_right = NodePath("../../SM_Ground/Paths/Decoration RIGHT right Path3D")
timer_RR = NodePath("../../Timers/Decoration Rightright Timer4")
path_Right_center = NodePath("../../SM_Ground/Paths/Decoration RIGHT center Path3D")
timer_RC = NodePath("../../Timers/Decoration Rightcenter Timer5")
path_Right_left = NodePath("../../SM_Ground/Paths/Decoration RIGHT left Path3D")
timer_RL = NodePath("../../Timers/Decoration Rightleft Timer6")

[node name="NPC_Generator" parent="Scripts" unique_id=978562651 instance=ExtResource("10_om7mb")]

[node name="Game_Speed_Manager" type="Node" parent="Scripts" unique_id=979240591]
script = ExtResource("11_a27uk")
increment_vitesse = 0.25
intervalle_temps = 20.0

[node name="UI" type="Control" parent="." unique_id=556213673 node_paths=PackedStringArray("score_label", "health_bar", "mask_manager") groups=["UI"]]
layout_mode = 3
anchors_preset = 0
offset_right = 539.0
offset_bottom = 962.0
script = ExtResource("12_rkggn")
score_label = NodePath("ScoreContainer/Score Label")
health_bar = NodePath("Health Bar")
mask_manager = NodePath("../Player_Mesh/Visuals/Mask_Manager")
fx_steal_scene = ExtResource("17_4bnli")
hauteur_visage = 1.0
zone_largeur = Vector2(-0.4, 0.4)
scale_min = 0.1
scale_max = 1.35

[node name="ScoreContainer" type="TextEdit" parent="UI" unique_id=1726788413 groups=["ScoreLabel"]]
layout_mode = 0
offset_left = 308.0
offset_top = 11.0
offset_right = 528.0
offset_bottom = 56.0
editable = false
context_menu_enabled = false
emoji_menu_enabled = false
shortcut_keys_enabled = false
selecting_enabled = false
deselect_on_focus_loss_enabled = false
drag_and_drop_selection_enabled = false
middle_mouse_paste_enabled = false
empty_selection_clipboard_enabled = false
tab_input_mode = false
virtual_keyboard_enabled = false

[node name="Score Label" type="Label" parent="UI/ScoreContainer" unique_id=1376001332 groups=["ScoreLabel"]]
layout_mode = 0
offset_left = 7.0
offset_top = 8.0
offset_right = 214.0
offset_bottom = 39.0
text = "Points"

[node name="Face Steal Button" type="Button" parent="UI" unique_id=119236727 groups=["Boutons_interaction"]]
visible = false
layout_mode = 0
offset_left = 391.0
offset_top = 341.0
offset_right = 482.0
offset_bottom = 424.0
text = "Vol
visage"

[node name="Health Bar" type="ProgressBar" parent="UI" unique_id=1541017287]
modulate = Color(1, 0.09019608, 0.05882353, 1)
layout_mode = 0
offset_left = 16.0
offset_top = 19.0
offset_right = 292.0
offset_bottom = 46.0
value = 100.0

[node name="BoundsLeft" type="Control" parent="UI" unique_id=573824415]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 30.0
offset_top = -350.0
offset_right = 229.0
offset_bottom = -90.0
grow_vertical = 0

[node name="BoundsRight" type="Control" parent="UI" unique_id=59165273]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -236.0
offset_top = -310.0
offset_right = -37.0
offset_bottom = -50.0
grow_horizontal = 0
grow_vertical = 0

[connection signal="timeout" from="Timers/PNJ Spawn Timer" to="Scripts/PNJ_Manager" method="_on_pnj_spawn_timer_timeout"]
[connection signal="timeout" from="Timers/Decoration Leftleft Timer1" to="Scripts/Decoration_Manager" method="_on_decoration_leftleft_timer_1_timeout"]
[connection signal="timeout" from="Timers/Decoration Leftcenter Timer2" to="Scripts/Decoration_Manager" method="_on_decoration_leftcenter_timer_2_timeout"]
[connection signal="timeout" from="Timers/Decoration Leftright Timer3" to="Scripts/Decoration_Manager" method="_on_decoration_leftright_timer_3_timeout"]
[connection signal="timeout" from="Timers/Decoration Rightright Timer4" to="Scripts/Decoration_Manager" method="_on_decoration_rightright_timer_4_timeout"]
[connection signal="timeout" from="Timers/Decoration Rightcenter Timer5" to="Scripts/Decoration_Manager" method="_on_decoration_rightcenter_timer_5_timeout"]
[connection signal="timeout" from="Timers/Decoration Rightleft Timer6" to="Scripts/Decoration_Manager" method="_on_decoration_rightleft_timer_6_timeout"]
[connection signal="pressed" from="UI/Face Steal Button" to="UI" method="_on_face_steal_button_pressed"]
